* Table Schema

CREATE TABLE shas (
	SHA_SIG varchar(45),
	SHA_FILE varchar(45)
);

CREATE TABLE files (
       SHA_FILE varchar(45) primary key,
       SHA_CONTAINER varchar(45),
       PATH text,
       FILE_NAME text,
       EXTENSION text,
       MOD_DATE timestamp with time zone
);

CREATE TABLE classSigs (
      SHA_SIG varchar(45) primary key,
      CLASS_NAME text,
      FULL_CLASS_NAME text, 
      PATH text,
      BASENAME text, 
      EXTENSION text
);

CREATE TABLE methSigs (
      SHA_SIG varchar(45) primary key,
      CLASS_NAME text,
      FULL_CLASS_NAME text, 
      METH_ID text,
      METH_FULL_ID text, 
      TYPE text,
      PARAMETERS text
);

CREATE TABLE attrSigs (
      SHA_SIG varchar(45) primary key,
      CLASS_NAME text,
      FULL_CLASS_NAME text, 
      ATTR_ID text
);

CREATE TABLE containers (
      SHA_CONTAINER varchar(45) primary key,
      CONTAINER_PATH text, 
      CONTAINER_NAME text
);

* Queries I used 
  
CREATE TEMP TABLE tmp as SELECT * FROM files WITH NO DATA;

COPY tmp FROM '/home/tony/Documents/Work/hermes/outputParser/outFileData.csv' WITH DELIMITER ';' CSV;

INSERT INTO files SELECT DISTINCT ON (sha_file) * FROM tmp;

CREATE TEMP TABLE tmp2 as SELECT * FROM containers WITH NO DATA;

COPY tmp2 FROM '/home/tony/Documents/Work/hermes/outputParser/jarOut.csv' WITH DELIMITER ';' CSV;

INSERT INTO containers SELECT DISTINCT ON (sha_container) * FROM tmp2;

COPY classSigs FROM '/home/tony/Documents/Work/hermes/outputParser/sigClassOut.csv' WITH DELIMITER ';' CSV;
COPY methSigs FROM '/home/tony/Documents/Work/hermes/outputParser/sigMethOut.csv' WITH DELIMITER ';' CSV;
COPY attrSigs FROM '/home/tony/Documents/Work/hermes/outputParser/sigAttrOut.csv' WITH DELIMITER ';' CSV;
COPY shas FROM '/home/tony/Documents/Work/hermes/outputParser/outSHAs.csv' WITH DELIMITER ';' CSV;

